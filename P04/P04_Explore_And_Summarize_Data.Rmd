Explore and Summarize Red Wine Data by Luis Cruz
========================================================

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using
# in your analysis in this code chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.
# You should set echo=FALSE for all code chunks in your file.

library(ggplot2)
```

In this project a wine dataset is used.
It is related to red variant of the Portuguese "Vinho Verde" wine.
The data is available [here](https://s3.amazonaws.com/udacity-hosted-downloads/ud651/wineQualityReds.csv).
A description of this dataset can be found [here](https://s3.amazonaws.com/udacity-hosted-downloads/ud651/wineQualityInfo.txt).

According to this description there are no Null values.
A description of the attributes is also given:

   1 - **fixed acidity** (tartaric acid - g / dm^3): most acids involved with wine or fixed or nonvolatile (do not evaporate readily)

   2 - **volatile acidity** (acetic acid - g / dm^3): the amount of acetic acid in wine, which at too high of levels can lead to an unpleasant, vinegar taste

   3 - **citric acid** (g / dm^3): found in small quantities, citric acid can add 'freshness' and flavor to wines

   4 - **residual sugar** (g / dm^3): the amount of sugar remaining after fermentation stops, it's rare to find wines with less than 1 gram/liter and wines with greater than 45 grams/liter are considered sweet

   5 - **chlorides** (sodium chloride - g / dm^3): the amount of salt in the wine

   6 - **free sulfur dioxide** (mg / dm^3): the free form of SO2 exists in equilibrium between molecular SO2 (as a dissolved gas) and bisulfite ion; it prevents microbial growth and the oxidation of wine

   7 - **total sulfur dioxide** (mg / dm^3): amount of free and bound forms of S02; in low concentrations, SO2 is mostly undetectable in wine, but at free SO2 concentrations over 50 ppm, SO2 becomes evident in the nose and taste of wine

   8 - **density** (g / cm^3): the density of water is close to that of water depending on the percent alcohol and sugar content

   9 - **pH**: describes how acidic or basic a wine is on a scale from 0 (very acidic) to 14 (very basic); most wines are between 3-4 on the pH scale

   10 - **sulphates** (potassium sulphate - g / dm3): a wine additive which can contribute to sulfur dioxide gas (S02) levels, which acts as an antimicrobial and antioxidant

   11 - **alcohol** (% by volume): the percent alcohol content of the wine

   12 - **quality** (score between 0 and 10) -- __Output variable (based on sensory data)__

```{r echo=FALSE, Load_the_Data}
# Load the Data
path <- "./wineQualityReds.csv"
#path <- "https://s3.amazonaws.com/udacity-hosted-downloads/ud651/wineQualityReds.csv"
df <- read.csv(path)
```

### Dataset Overview
```{r overview}
dim(df)
names(df)
str(df)
summary(df)
```

This overview shows that all the attributes are numerical. Also we can see that the wines in this study have relatively low alcohol, since 75% of wines have between 8.40 and 11.10 by volume. This is a common feature in this kind of wine, "Vinho Verde".
Properties such as __residual.sugar__, __chlorides__, __free.sulfur.dioxide__ and __total.sulfur.dioxide__ seem to have outliers since the maximum is much higher than the 75% percentile.

# Univariate Plots Section

### Quality

```{r quality}
qplot(data = df, x=quality, binwidth=1)+
  scale_x_continuous(limits = c(0,10), breaks=seq(0,10,1))
```


### Alcohol
```{r acidity}
qplot(data = df, x=alcohol, binwidth=0.5)+
  scale_x_continuous(limits = c(8,15), breaks=seq(8,15,0.5))

qplot(data = df, x=alcohol, binwidth=0.1)+
  scale_x_continuous(limits = c(8,15), breaks=seq(8,15,0.5))
```

There are some outliers below 9% and above 14% alcohol by volume. Most wines are between 9% and 12%.

### pH
```{r pH}
qplot(data = df, x=pH, binwidth=0.1)+
  scale_x_continuous(limits = c(2.7,4.1), breaks=seq(2.7,4.1,0.1))
```

## Fixed acidity
```{r fixed.acidity}
qplot(data = df, x=fixed.acidity, binwidth=0.5)+
  scale_x_continuous(limits = c(4.6,15.9), breaks=seq(4.5,16,0.5))
```

## Sulphates
```{r sulphates}
qplot(data = df, x=sulphates, binwidth=0.1)+
  scale_x_continuous(limits = c(0,2), breaks=seq(0,2,0.1))
```

Most wines have sulphates between 0.4 and 0.9$g/dm^3$.

# Univariate Analysis

### What is the structure of your dataset?

There are 1599 different wines with 13 variables, including column X, which is just an index variable.

The 13 columns in this dataset are the following:

- X
- fixed.acidity
- volatile.acidity
- citric.acid
- residual.sugar
- chlorides
- free.sulfur.dioxide
- total.sulfur.dioxide
- density
- pH
- sulphates
- alcohol
- quality

They are all numeric

### What is/are the main feature(s) of interest in your dataset?

The main feature of interest in this dataset is quality. It would also be interesting if there was a feature for price. Unfortunately, it is not easy identify which wine is being referred in data, and this information is not available.

### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?
I am expecting that the chemical composition (fixed.acidity, volatile.acidity, citric.acid, residual.sugar, chlorides, free.sulfur.dioxide, total.sulfur.dioxide, sulphates, alcohol) of the wine have an impact in the quality of the wine.

I am also curious to see whether a good wine needs to have a high percentage of alcohol by volume. Or whether a good wine is correlated with the amount of sugar. Since sulphates are an additive I am expecting it to be lower in high quality wines.


### Did you create any new variables from existing variables in the dataset?

So far, I didn't find useful to extract new features from this dataset.
### Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?



# Bivariate Plots Section
```{r correlation}

#drop column X (it creating unecessary complexity)
df <- subset(df, select = -c(X) )

correlation_matrix <- cor(df, method='pearson')
correlation_matrix

#Visualization of the correlation matrix
library('corrplot') #package corrplot
corrplot(correlation_matrix, method = "circle") #plot matrix
```

The only features that have correlation with quality are alcohol (0.476) and volatile.acidity (-0.391). The positive correlation with alcohol is really interesting.

Although I suggested that sulphates could be negatively correlated with quality, it is not evident in this analysis. 

## Quality vs. Alcohol

```{r quality_vs_alcohol}
cor.test(df$alcohol, df$quality)

ggplot(aes(x=quality, y=alcohol), data=df)+
  #xlim(13,90)+
  geom_point(alpha = 0.1,
             #position = position_jitter(h=0),
             color = 'orange'
  )+
  #coord_trans(y="sqrt")+
  geom_line(stat="summary", fun.y = mean)+
  geom_line(stat="summary", fun.y = median, color='blue')
```

## Quality vs. Volatile Acidity
```{r quality_vs_volatile.acidity}
cor.test(df$volatile.acidity, df$quality)

p1 <- ggplot(aes(x=factor(quality), y=volatile.acidity), data=df)+
  geom_point(alpha = 0.1, color = 'orange')+
  geom_line(stat="summary", fun.y = mean)+
  geom_line(stat="summary", fun.y = median, color='blue')

p1  
p1+geom_violin(alpha=0.1, fill= "blue")
```

volatile.acidity

# Bivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?

### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?

### What was the strongest relationship you found?




# Multivariate Plots Section

```{r echo=FALSE, Multivariate_Plots}

```

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the strengths and limitations of your model.

------

# Final Plots and Summary

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection

